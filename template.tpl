___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
  Google may provide), as modified from time to time.


  ___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Piano Analytics by Addingwell",
  "brand": {
  "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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"
},
  "description": "The Piano Analytics template reads data from the GA4 client and sends it (mapped) to Piano servers.",
  "containerContexts": [
  "SERVER"
]
}


___TEMPLATE_PARAMETERS___

  [
  {
    "type": "SELECT",
    "name": "inheritEventName",
    "displayName": "Event Name Setup Method",
    "selectItems": [
      {
        "value": "inherit",
        "displayValue": "Inherit from client"
      },
      {
        "value": "override",
        "displayValue": "Override"
      }
    ],
    "simpleValueType": true,
    "subParams": [
      {
        "type": "RADIO",
        "name": "eventName",
        "displayName": "Event Type",
        "radioItems": [
          {
            "value": "standard",
            "displayValue": "Standard",
            "subParams": [
              {
                "type": "SELECT",
                "name": "eventNameStandard",
                "selectItems": [
                  {
                    "value": "page.display",
                    "displayValue": "page.display"
                  },
                  {
                    "value": "click.action",
                    "displayValue": "click.action"
                  },
                  {
                    "value": "click.navigation",
                    "displayValue": "click.navigation"
                  },
                  {
                    "value": "click.download",
                    "displayValue": "click.download"
                  },
                  {
                    "value": "click.exit",
                    "displayValue": "click.exit"
                  },
                  {
                    "value": "publisher.impression",
                    "displayValue": "publisher.impression"
                  },
                  {
                    "value": "publisher.click",
                    "displayValue": "publisher.click"
                  },
                  {
                    "value": "self_promotion.impression",
                    "displayValue": "self_promotion.impression"
                  },
                  {
                    "value": "self_promotion.click",
                    "displayValue": "self_promotion.click"
                  },
                  {
                    "value": "internal_search_result.display",
                    "displayValue": "internal_search_result.display"
                  },
                  {
                    "value": "internal_search_result.click",
                    "displayValue": "internal_search_result.click"
                  },
                  {
                    "value": "mv_test.display",
                    "displayValue": "mv_test.display"
                  },
                  {
                    "value": "product.display",
                    "displayValue": "product.display"
                  },
                  {
                    "value": "product.page_display",
                    "displayValue": "product.page_display"
                  },
                  {
                    "value": "product.add_to_cart",
                    "displayValue": "product.add_to_cart"
                  },
                  {
                    "value": "product.remove_from_cart",
                    "displayValue": "product.remove_from_cart"
                  },
                  {
                    "value": "cart.creation",
                    "displayValue": "cart.creation"
                  },
                  {
                    "value": "cart.display",
                    "displayValue": "cart.display"
                  },
                  {
                    "value": "cart.update",
                    "displayValue": "cart.update"
                  },
                  {
                    "value": "cart.delivery",
                    "displayValue": "cart.delivery"
                  },
                  {
                    "value": "cart.payment",
                    "displayValue": "cart.payment"
                  },
                  {
                    "value": "cart.awaiting_payment",
                    "displayValue": "cart.awaiting_payment"
                  },
                  {
                    "value": "product.awaiting_payment",
                    "displayValue": "product.awaiting_payment"
                  },
                  {
                    "value": "transaction.confirmation",
                    "displayValue": "transaction.confirmation"
                  },
                  {
                    "value": "product.purchased",
                    "displayValue": "product.purchased"
                  }
                ],
                "simpleValueType": true
              }
            ]
          },
          {
            "value": "custom",
            "displayValue": "Custom",
            "subParams": [
              {
                "type": "TEXT",
                "name": "eventNameCustom",
                "simpleValueType": true
              }
            ]
          }
        ],
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "inheritEventName",
            "paramValue": "override",
            "type": "EQUALS"
          }
        ]
      }
    ]
  },
    {
      "type": "TEXT",
      "name": "domain",
      "displayName": "Collection domain",
      "simpleValueType": true
    },
    {
      "type": "TEXT",
      "name": "siteId",
      "displayName": "Site ID",
      "simpleValueType": true
    },
    {
      "type": "GROUP",
      "name": "goalTypeListGroup",
      "displayName": "Setup Goal Type",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "goalTypeList",
          "displayName": "Add Goal Type",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Event Name (Piano format)",
              "name": "event",
              "type": "TEXT"
            },
            {
              "defaultValue": "",
              "displayName": "Goal Type",
              "name": "goal_type",
              "type": "TEXT"
            }
          ],
          "valueValidators": []
        }
      ]
    },
    {
      "type": "GROUP",
      "name": "standardListGroup",
      "displayName": "Override standard parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "standardList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "previous_url",
                  "displayValue": "previous_url"
                },
                {
                  "value": "device_timestamp_utc",
                  "displayValue": "device_timestamp_utc"
                },
                {
                  "value": "event_collection_platform",
                  "displayValue": "event_collection_platform"
                },
                {
                  "value": "event_collection_version",
                  "displayValue": "event_collection_version"
                },
                {
                  "value": "device_manufacturer",
                  "displayValue": "device_manufacturer"
                },
                {
                  "value": "device_model",
                  "displayValue": "device_model"
                },
                {
                  "value": "device_display_height",
                  "displayValue": "device_display_height"
                },
                {
                  "value": "device_display_width",
                  "displayValue": "device_display_width"
                },
                {
                  "value": "device_screen_height",
                  "displayValue": "device_screen_height"
                },
                {
                  "value": "device_screen_width",
                  "displayValue": "device_screen_width"
                },
                {
                  "value": "src_medium",
                  "displayValue": "src_medium"
                },
                {
                  "value": "src_campaign",
                  "displayValue": "src_campaign"
                },
                {
                  "value": "src_creation",
                  "displayValue": "src_creation"
                },
                {
                  "value": "src_variant",
                  "displayValue": "src_variant"
                },
                {
                  "value": "src_format",
                  "displayValue": "src_format"
                },
                {
                  "value": "src_type",
                  "displayValue": "src_type"
                },
                {
                  "value": "user_id",
                  "displayValue": "user_id"
                },
                {
                  "value": "user_category",
                  "displayValue": "user_category"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ],
      "help": "See \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/collection-api#standard-properties\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can add to the call."
    },
    {
      "type": "GROUP",
      "name": "pageDisplayListGroup",
      "displayName": "Override page display parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "pageDisplayList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "page",
                  "displayValue": "page"
                },
                {
                  "value": "page_chapter1",
                  "displayValue": "page_chapter1"
                },
                {
                  "value": "page_chapter2",
                  "displayValue": "page_chapter2"
                },
                {
                  "value": "page_chapter3",
                  "displayValue": "page_chapter3"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ],
      "help": "See \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/standard-events#page-display\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can add to the call."
    },
    {
      "type": "GROUP",
      "name": "clicksListGroup",
      "displayName": "Override clicks parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "clicksList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "click",
                  "displayValue": "click"
                },
                {
                  "value": "click_chapter1",
                  "displayValue": "click_chapter1"
                },
                {
                  "value": "click_chapter2",
                  "displayValue": "click_chapter2"
                },
                {
                  "value": "click_chapter3",
                  "displayValue": "click_chapter3"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ],
      "help": "See \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/standard-events#clicks\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can add to the call."
    },
    {
      "type": "GROUP",
      "name": "onsiteAdsListGroup",
      "displayName": "Override onsite ads parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "onsiteAdsList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "onsitead_type",
                  "displayValue": "onsitead_type"
                },
                {
                  "value": "onsitead_advertiser",
                  "displayValue": "onsitead_advertiser"
                },
                {
                  "value": "onsitead_campaign",
                  "displayValue": "onsitead_campaign"
                },
                {
                  "value": "onsitead_category",
                  "displayValue": "onsitead_category"
                },
                {
                  "value": "onsitead_creation",
                  "displayValue": "onsitead_creation"
                },
                {
                  "value": "onsitead_detailed_placement",
                  "displayValue": "onsitead_detailed_placement"
                },
                {
                  "value": "onsitead_format",
                  "displayValue": "onsitead_format"
                },
                {
                  "value": "onsitead_general_placement",
                  "displayValue": "onsitead_general_placement"
                },
                {
                  "value": "onsitead_url",
                  "displayValue": "onsitead_url"
                },
                {
                  "value": "onsitead_variant",
                  "displayValue": "onsitead_variant"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ],
      "help": "See \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/standard-events#onsite-ads\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can add to the call."
    },
    {
      "type": "GROUP",
      "name": "internalSearchEngineListGroup",
      "displayName": "Override internal search engine parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "internalSearchEngineList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "ise_keyword",
                  "displayValue": "ise_keyword"
                },
                {
                  "value": "ise_page",
                  "displayValue": "ise_page"
                },
                {
                  "value": "ise_click_rank",
                  "displayValue": "ise_click_rank"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ],
      "help": "See \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/standard-events#internal-search-engine\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can add to the call."
    },
    {
      "type": "GROUP",
      "name": "mvTestingListGroup",
      "displayName": "Override mv testing parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "mvTestingList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "mv_creation",
                  "displayValue": "mv_creation"
                },
                {
                  "value": "mv_test",
                  "displayValue": "mv_test"
                },
                {
                  "value": "mv_wave",
                  "displayValue": "mv_wave"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ],
      "help": "See \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/standard-events#mv-testing\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can add to the call."
    },
    {
      "type": "GROUP",
      "name": "productListGroup",
      "displayName": "Override product parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "productList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "product_id",
                  "displayValue": "product_id"
                },
                {
                  "value": "product",
                  "displayValue": "product"
                },
                {
                  "value": "product_variant",
                  "displayValue": "product_variant"
                },
                {
                  "value": "product_brand",
                  "displayValue": "product_brand"
                },
                {
                  "value": "product_discount",
                  "displayValue": "product_discount"
                },
                {
                  "value": "product_placement",
                  "displayValue": "product_placement"
                },
                {
                  "value": "product_pricetaxincluded",
                  "displayValue": "product_pricetaxincluded"
                },
                {
                  "value": "product_pricetaxfree",
                  "displayValue": "product_pricetaxfree"
                },
                {
                  "value": "product_stock",
                  "displayValue": "product_stock"
                },
                {
                  "value": "product_quantity",
                  "displayValue": "product_quantity"
                },
                {
                  "value": "product_category1",
                  "displayValue": "product_category1"
                },
                {
                  "value": "product_category2",
                  "displayValue": "product_category2"
                },
                {
                  "value": "product_category3",
                  "displayValue": "product_category3"
                },
                {
                  "value": "product_category4",
                  "displayValue": "product_category4"
                },
                {
                  "value": "product_cartcreation",
                  "displayValue": "product_cartcreation"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ],
      "help": "See \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/sales-insights#product-properties\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can add to the call."
    },
    {
      "type": "GROUP",
      "name": "cartListGroup",
      "displayName": "Override cart parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "cartList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "cart_id",
                  "displayValue": "cart_id"
                },
                {
                  "value": "cart_currency",
                  "displayValue": "cart_currency"
                },
                {
                  "value": "cart_turnovertaxincluded",
                  "displayValue": "cart_turnovertaxincluded"
                },
                {
                  "value": "cart_turnovertaxfree",
                  "displayValue": "cart_turnovertaxfree"
                },
                {
                  "value": "cart_creation_utc",
                  "displayValue": "cart_creation_utc"
                },
                {
                  "value": "cart_quantity",
                  "displayValue": "cart_quantity"
                },
                {
                  "value": "cart_nbdistinctproduct",
                  "displayValue": "cart_nbdistinctproduct"
                },
                {
                  "value": "cart_version",
                  "displayValue": "cart_version"
                },
                {
                  "value": "confirmation_delay",
                  "displayValue": "confirmation_delay"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ],
      "help": "See \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/sales-insights#cart-properties\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can add to the call."
    },
    {
      "type": "GROUP",
      "name": "transactionListGroup",
      "displayName": "Override transaction parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "transactionList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "transaction_id",
                  "displayValue": "transaction_id"
                },
                {
                  "value": "transaction_promocode",
                  "displayValue": "transaction_promocode"
                },
                {
                  "value": "transaction_firstpurchase",
                  "displayValue": "transaction_firstpurchase"
                },
                {
                  "value": "transaction_status",
                  "displayValue": "transaction_status"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ],
      "help": "See \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/sales-insights#transaction-properties\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can add to the call."
    },
    {
      "type": "GROUP",
      "name": "shippingListGroup",
      "displayName": "Override shipping parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "shippingList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "shipping_delivery",
                  "displayValue": "shipping_delivery"
                },
                {
                  "value": "shipping_costtaxincluded",
                  "displayValue": "shipping_costtaxincluded"
                },
                {
                  "value": "shipping_costtaxfree",
                  "displayValue": "shipping_costtaxfree"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ],
      "help": "See \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/sales-insights#shipping-properties\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can add to the call."
    },
    {
      "type": "GROUP",
      "name": "paymentListGroup",
      "displayName": "Override payment parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "paymentList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "payment_mode",
                  "displayValue": "payment_mode"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ],
      "help": "See \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/sales-insights#payment-properties\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can add to the call."
    },
    {
      "type": "GROUP",
      "name": "customDataListGroup",
      "displayName": "Custom parameters",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "SIMPLE_TABLE",
          "name": "customDataList",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Property Name",
              "name": "name",
              "type": "TEXT",
              "selectItems": []
            },
            {
              "defaultValue": "",
              "displayName": "Property Value",
              "name": "value",
              "type": "TEXT"
            }
          ],
          "newRowButtonText": "Add property"
        }
      ]
    },
    {
      "type": "GROUP",
      "name": "consentManagement",
      "displayName": "Consent Management",
      "groupStyle": "ZIPPY_CLOSED",
      "subParams": [
        {
          "type": "TEXT",
          "name": "consentStatus",
          "displayName": "Consent Status",
          "simpleValueType": true,
          "help": "The consent status for Piano. The expected values are \u003cb\u003eoptin\u003c/b\u003e, \u003cb\u003eexempt\u003c/b\u003e or \u003cb\u003eoptout\u003c/b\u003e. See this page for more information about the \u003ca href\u003d\"https://developers.atinternet-solutions.com/piano-analytics/data-collection/how-to-send-events/consent\" target\u003d\"_blank\"\u003eConsent Management with Piano\u003c/a\u003e. If this field is blank, the parameter used  is \u003ci\u003evisitor_privacy_mode\u003c/i\u003e.",
          "canBeEmptyString": false,
          "valueHint": "Default to event.visitor_privacy_mode"
        },
        {
          "type": "SIMPLE_TABLE",
          "name": "customConsentList",
          "displayName": "",
          "simpleTableColumns": [
            {
              "defaultValue": "",
              "displayName": "Parameter",
              "name": "parameter",
              "type": "TEXT",
              "selectItems": [
                {
                  "value": "previous_url",
                  "displayValue": "Standard - previous_url"
                },
                {
                  "value": "device_timestamp_utc",
                  "displayValue": "Standard - device_timestamp_utc"
                },
                {
                  "value": "event_collection_platform",
                  "displayValue": "Standard - event_collection_platform"
                },
                {
                  "value": "event_collection_version",
                  "displayValue": "Standard - event_collection_version"
                },
                {
                  "value": "device_manufacturer",
                  "displayValue": "Standard - device_manufacturer"
                },
                {
                  "value": "device_model",
                  "displayValue": "Standard - device_model"
                },
                {
                  "value": "device_display_height",
                  "displayValue": "Standard - device_display_height"
                },
                {
                  "value": "device_display_width",
                  "displayValue": "Standard - device_display_width"
                },
                {
                  "value": "device_screen_height",
                  "displayValue": "Standard - device_screen_height"
                },
                {
                  "value": "device_screen_width",
                  "displayValue": "Standard - device_screen_width"
                },
                {
                  "value": "src_medium",
                  "displayValue": "Standard - src_medium"
                },
                {
                  "value": "src_campaign",
                  "displayValue": "Standard - src_campaign"
                },
                {
                  "value": "src_creation",
                  "displayValue": "Standard - src_creation"
                },
                {
                  "value": "src_variant",
                  "displayValue": "Standard - src_variant"
                },
                {
                  "value": "src_format",
                  "displayValue": "Standard - src_format"
                },
                {
                  "value": "src_type",
                  "displayValue": "Standard - src_type"
                },
                {
                  "value": "user_id",
                  "displayValue": "Standard - user_id"
                },
                {
                  "value": "user_category",
                  "displayValue": "Standard - user_category"
                },
                {
                  "value": "page",
                  "displayValue": "Page Display - page"
                },
                {
                  "value": "page_chapter1",
                  "displayValue": "Page Display - page_chapter1"
                },
                {
                  "value": "page_chapter2",
                  "displayValue": "Page Display - page_chapter2"
                },
                {
                  "value": "page_chapter3",
                  "displayValue": "Page Display - page_chapter3"
                },
                {
                  "value": "click",
                  "displayValue": "Click - click"
                },
                {
                  "value": "click_chapter1",
                  "displayValue": "Click - click_chapter1"
                },
                {
                  "value": "click_chapter2",
                  "displayValue": "Click - click_chapter2"
                },
                {
                  "value": "click_chapter3",
                  "displayValue": "Click - click_chapter3"
                },
                {
                  "value": "onsitead_type",
                  "displayValue": "On Site Ads - onsitead_type"
                },
                {
                  "value": "onsitead_advertiser",
                  "displayValue": "On Site Ads - onsitead_advertiser"
                },
                {
                  "value": "onsitead_campaign",
                  "displayValue": "On Site Ads - onsitead_campaign"
                },
                {
                  "value": "onsitead_category",
                  "displayValue": "On Site Ads - onsitead_category"
                },
                {
                  "value": "onsitead_creation",
                  "displayValue": "On Site Ads - onsitead_creation"
                },
                {
                  "value": "onsitead_detailed_placement",
                  "displayValue": "On Site Ads - onsitead_detailed_placement"
                },
                {
                  "value": "onsitead_format",
                  "displayValue": "On Site Ads - onsitead_format"
                },
                {
                  "value": "onsitead_general_placement",
                  "displayValue": "On Site Ads - onsitead_general_placement"
                },
                {
                  "value": "onsitead_url",
                  "displayValue": "On Site Ads - onsitead_url"
                },
                {
                  "value": "onsitead_variant",
                  "displayValue": "On Site Ads - onsitead_variant"
                },
                {
                  "value": "ise_keyword",
                  "displayValue": "Internal Search Engine - ise_keyword"
                },
                {
                  "value": "ise_page",
                  "displayValue": "Internal Search Engine - ise_page"
                },
                {
                  "value": "ise_click_rank",
                  "displayValue": "Internal Search Engine - ise_click_rank"
                },
                {
                  "value": "mv_creation",
                  "displayValue": "MV Testing - mv_creation"
                },
                {
                  "value": "mv_test",
                  "displayValue": "MV Testing - mv_test"
                },
                {
                  "value": "mv_wave",
                  "displayValue": "MV Testing - mv_wave"
                },
                {
                  "value": "product_id",
                  "displayValue": "Product - product_id"
                },
                {
                  "value": "product",
                  "displayValue": "Product - product"
                },
                {
                  "value": "product_variant",
                  "displayValue": "Product - product_variant"
                },
                {
                  "value": "product_brand",
                  "displayValue": "Product - product_brand"
                },
                {
                  "value": "product_discount",
                  "displayValue": "Product - product_discount"
                },
                {
                  "value": "product_placement",
                  "displayValue": "Product - product_placement"
                },
                {
                  "value": "product_pricetaxincluded",
                  "displayValue": "Product - product_pricetaxincluded"
                },
                {
                  "value": "product_pricetaxfree",
                  "displayValue": "Product - product_pricetaxfree"
                },
                {
                  "value": "product_stock",
                  "displayValue": "Product - product_stock"
                },
                {
                  "value": "product_quantity",
                  "displayValue": "Product - product_quantity"
                },
                {
                  "value": "product_category1",
                  "displayValue": "Product - product_category1"
                },
                {
                  "value": "product_category2",
                  "displayValue": "Product - product_category2"
                },
                {
                  "value": "product_category3",
                  "displayValue": "Product - product_category3"
                },
                {
                  "value": "product_category4",
                  "displayValue": "Product - product_category4"
                },
                {
                  "value": "product_cartcreation",
                  "displayValue": "Product - product_cartcreation"
                },
                {
                  "value": "cart_id",
                  "displayValue": "Cart - cart_id"
                },
                {
                  "value": "cart_currency",
                  "displayValue": "Cart - cart_currency"
                },
                {
                  "value": "cart_turnovertaxincluded",
                  "displayValue": "Cart - cart_turnovertaxincluded"
                },
                {
                  "value": "cart_turnovertaxfree",
                  "displayValue": "Cart - cart_turnovertaxfree"
                },
                {
                  "value": "cart_creation_utc",
                  "displayValue": "Cart - cart_creation_utc"
                },
                {
                  "value": "cart_quantity",
                  "displayValue": "Cart - cart_quantity"
                },
                {
                  "value": "cart_nbdistinctproduct",
                  "displayValue": "Cart - cart_nbdistinctproduct"
                },
                {
                  "value": "cart_version",
                  "displayValue": "Cart - cart_version"
                },
                {
                  "value": "confirmation_delay",
                  "displayValue": "Cart - confirmation_delay"
                },
                {
                  "value": "transaction_id",
                  "displayValue": "Transaction - transaction_id"
                },
                {
                  "value": "transaction_promocode",
                  "displayValue": "Transaction - transaction_promocode"
                },
                {
                  "value": "transaction_firstpurchase",
                  "displayValue": "Transaction - transaction_firstpurchase"
                },
                {
                  "value": "transaction_status",
                  "displayValue": "Transaction - transaction_status"
                },
                {
                  "value": "shipping_delivery",
                  "displayValue": "Shipping - shipping_delivery"
                },
                {
                  "value": "shipping_costtaxincluded",
                  "displayValue": "Shipping - shipping_costtaxincluded"
                },
                {
                  "value": "shipping_costtaxfree",
                  "displayValue": "Shipping - shipping_costtaxfree"
                },
                {
                  "value": "payment_mode",
                  "displayValue": "Payment - payment_mode"
                }
              ]
            },
            {
              "defaultValue": "",
              "displayName": "Consent Status",
              "name": "consent",
              "type": "SELECT",
              "selectItems": [
                {
                  "value": "OPTIN",
                  "displayValue": "Optional (opt-in only)"
                },
                {
                  "value": "OPTIN_ESSENTIAL",
                  "displayValue": "Essential (opt-in and exempt)"
                },
                {
                  "value": "OPTIN_ESSENTIAL_OPTOUT",
                  "displayValue": "Mandatory (opt-in, exempt and opt-out)"
                }
              ],
              "valueValidators": [
                {
                  "type": "NON_EMPTY"
                }
              ]
            }
          ]
        }
      ]
    }
  ]


___SANDBOXED_JS_FOR_SERVER___

const encodeUriComponent = require('encodeUriComponent');
const getAllEventData = require('getAllEventData');
const JSON = require('JSON');
const Math = require('Math');
const sendHttpRequest = require('sendHttpRequest');
const getTimestampMillis = require('getTimestampMillis');
const setCookie = require('setCookie');
const getCookieValues = require('getCookieValues');
const getContainerVersion = require('getContainerVersion');
const logToConsole = require('logToConsole');
const sha256Sync = require('sha256Sync');
const decodeUriComponent = require('decodeUriComponent');
const parseUrl = require('parseUrl');
const computeEffectiveTldPlusOne = require('computeEffectiveTldPlusOne');
const generateRandom = require('generateRandom');
const getType = require('getType');
const makeString = require('makeString');
const makeNumber = require('makeNumber');
const makeInteger = require('makeInteger');
const Object = require('Object');
const createRegex = require('createRegex');
const testRegex = require('testRegex');

const isLoggingEnabled = determinateIsLoggingEnabled();

let pcid = getCookieValues('_pcid')[0];
if (!pcid || isUuid(pcid)) {
  let browserId = "";
  if (isUuid(pcid)) {
    browserId = pcid;
  } else {
    browserId = generateUuid();
  }
  let timestamp_now = getTimestampMillis();
  let timestamp_13_months = getTimestampMillis() + (2629800000 * 13);
  pcid = JSON.stringify({
    "browserId": browserId,
    "_t":timestamp_13_months.toString(36) + "|" + timestamp_now.toString(36)
  });
}

if (pcid) {
  setCookie('_pcid', pcid, {
    domain: 'auto',
    path: '/',
    samesite: 'Lax',
    secure: true,
    'max-age': 34187400,
    HttpOnly: false
  });
}
pcid = JSON.parse(pcid);

const routeParams = '?s=' + encodeUriComponent(data.siteId) + '&idclient=' + encodeUriComponent(pcid.browserId);
const apiEndpoint = [data.domain, routeParams].join('/');
const eventData = getAllEventData();
const exemptConfig = {
  events: ['click.action', 'click.download', 'click.exit', 'click.navigation', 'page.display'],
  params: ['app_crash', 'app_crash_class', 'app_crash_screen', 'app_version', 'browser', 'browser_cookie_acceptance', 'browser_group', 'browser_version', 'click', 'click_chapter1', 'click_chapter2', 'click_chapter3', 'click_full_name', 'connection_monitor', 'connection_organisation', 'connection_type', 'date', 'date_day', 'date_daynumber', 'date_month', 'date_monthnumber', 'date_week', 'date_year', 'date_yearofweek', 'device_brand', 'device_display_height', 'device_display_width', 'device_name', 'device_name_tech', 'device_screen_diagonal', 'device_screen_height', 'device_screen_width', 'device_type', 'event_collection_platform', 'event_collection_version', 'event_hour', 'event_id', 'event_minute', 'event_name', 'event_position', 'event_second', 'event_time', 'event_time_utc', 'event_url', 'event_url_domain', 'event_url_full', 'exclusion_cause', 'exclusion_type', 'geo_city', 'geo_continent', 'geo_country', 'geo_metro', 'geo_region', 'hit_time_utc', 'os', 'os_group', 'os_version', 'os_version_name', 'page', 'page_chapter1', 'page_chapter2', 'page_chapter3', 'page_duration', 'page_full_name', 'page_position', 'page_title_html', 'page_url', 'pageview_id', 'privacy_status', 'site', 'site_env', 'site_id', 'site_platform', 'src', 'src_detail', 'src_direct_access', 'src_organic', 'src_organic_detail', 'src_portal_domain', 'src_portal_site', 'src_portal_site_id', 'src_portal_url', 'src_referrer_site_domain', 'src_referrer_site_url', 'src_referrer_url', 'src_se', 'src_se_category', 'src_se_country', 'src_type', 'src_url', 'src_url_domain', 'src_webmail', 'visit_bounce', 'visit_duration', 'visit_entrypage', 'visit_entrypage_chapter1', 'visit_entrypage_chapter2', 'visit_entrypage_chapter3', 'visit_entrypage_full_name', 'visit_exitpage', 'visit_exitpage_chapter1', 'visit_exitpage_chapter2', 'visit_exitpage_chapter3', 'visit_exitpage_full_name', 'visit_hour', 'visit_id', 'visit_minute', 'visit_page_views', 'visit_second', 'visit_time', 'visitor_privacy_consent', 'visitor_privacy_mode', 'connection_type', 'device_timestamp_utc']
};
const optOutConfig = {
  events: ['click.action', 'click.download', 'click.exit', 'click.navigation', 'page.display'],
  params: ['visitor_privacy_consent', 'visitor_privacy_mode', 'connection_type', 'device_timestamp_utc']
};

const consent = eventData.visitor_privacy_mode || data.consentStatus;
if (data.customConsentList) {
  if (consent === 'exempt' || consent === 'essential') {
    for (let d of data.customConsentList) {
      if (d.consent.indexOf('ESSENTIAL') > -1) {
        exemptConfig.params.push(d.parameter);
      }
    }
  }

  if (consent === 'optout' || consent === 'opt-out') {
    for (let d of data.customConsentList) {
      if (d.consent.indexOf('OPTOUT') > -1) {
        optOutConfig.params.push(d.parameter);
      }
    }
  }
}

const requestHeaders = {};
requestHeaders['User-Agent'] = eventData.user_agent;
requestHeaders.Referer = eventData.page_location;
requestHeaders['X-Forwarded-For'] = eventData.ip_override;
requestHeaders['content-type'] = 'application/json';

let event = {};

//CONTEXTUAL
event.visitor_privacy_mode = consent;
event.device_timestamp_utc = Math.round(getTimestampMillis() / 1000);
const cookie_t = pcid._t;
const cookie_tcd = cookie_t.split('|');
if (cookie_tcd.length === 2) {
  event.cookie_creation_date = parseInt36(cookie_tcd[1]);
}
event.event_collection_platform = 'api';
event.event_collection_version = '2';
event.page = eventData.page_title;
event.event_full_url = eventData.page_location;
event.previous_url = eventData.page_referrer;
if (eventData.screen_resolution && eventData.screen_resolution.indexOf('x') > -1) {
  const screenResolution = eventData.screen_resolution.split('x');
  event.device_screen_width = screenResolution[0];
  event.device_screen_height = screenResolution[1];
}

// MARKETING CAMPAIGNS
const pageLocationObj = parseUrl(eventData.page_location);
for (let param in pageLocationObj.searchParams) {
  if (param.indexOf('utm_') === 0 || param.indexOf('at_') === 0 || param.indexOf('src_') === 0) {
    const newParam = param.replace('utm_', 'src_').replace('at_', 'src_');
    event[newParam] = pageLocationObj.searchParams[param];
  }
}

// USERS
event.user_id = eventData.user_id;

// EVENTS
const requestBody = {};
requestBody.events = [];

if (data.inheritEventName === 'inherit') {
  switch(eventData.event_name) {
    case 'page_view':
      const pageViewEvent = JSON.parse(JSON.stringify(event));

      requestBody.events.push({
        name: 'page.display',
        data: pageViewEvent
      });

      break;

    case 'view_item':
      let viewItemEvent = JSON.parse(JSON.stringify(event));
      if (eventData.items && eventData.items.length > 0) {
        viewItemEvent = addItemData(eventData.items[0], viewItemEvent);
      }

      requestBody.events.push({
        name: 'product.page_display',
        data: viewItemEvent
      });

      break;

    case 'view_item_list':
      if (eventData.items && eventData.items.length > 0) {
        for (let i = 0; i < eventData.items.length; i ++) {
          let viewItemListEvent = JSON.parse(JSON.stringify(event));
          viewItemListEvent = addItemData(eventData.items[i], viewItemListEvent);

          requestBody.events.push({
            name: 'product.display',
            data: viewItemListEvent
          });
        }
      }

      break;

    case 'add_to_cart':
      let isNewCart = false;
      let cookieAtcCart = getCookieValues('_pa_cart')[0];
      let atcCart;

      if (isEmptyCart(cookieAtcCart)) {
        isNewCart = true;
        const cartCreationEvent = JSON.parse(JSON.stringify(event));
        atcCart = {
          id: generateUuid(),
          creation_utc: Math.round(getTimestampMillis() / 1000),
          currency: eventData.currency || ((eventData.items) ? eventData.items[0].currency : null),
          valueInclTax: (eventData.items) ? eventData.items[0].price * (eventData.items[0].quantity || 1) : 0,
          quantity: (eventData.items) ? eventData.items[0].quantity : 0,
          ids: addCartItemIds(eventData.items, [])
        };

        cartCreationEvent.cart_id = atcCart.id;
        cartCreationEvent.cart_currency = atcCart.currency;
        cartCreationEvent.cart_turnovertaxincluded = atcCart.valueInclTax;
        cartCreationEvent.cart_turnovertaxfree = atcCart.valueExclTax;
        cartCreationEvent.cart_quantity = atcCart.quantity;
        cartCreationEvent.cart_nbdistinctproduct = atcCart.ids.length;

        requestBody.events.push({
          name: 'cart.creation',
          data: cartCreationEvent
        });

      } else {
        const cartUpdateEvent = JSON.parse(JSON.stringify(event));
        atcCart = JSON.parse(cookieAtcCart);
        atcCart.currency = eventData.currency || ((eventData.items) ? eventData.items[0].currency : null);
        atcCart.valueInclTax = (eventData.items) ? atcCart.valueInclTax + eventData.items[0].price * (eventData.items[0].quantity || 1) : atcCart.valueInclTax;
        atcCart.quantity = (eventData.items) ? atcCart.quantity + eventData.items[0].quantity : atcCart.quantity;
        atcCart.ids = addCartItemIds(eventData.items, atcCart.ids);

        cartUpdateEvent.cart_id = atcCart.id;
        cartUpdateEvent.cart_currency = atcCart.currency;
        cartUpdateEvent.cart_turnovertaxincluded = atcCart.valueInclTax;
        cartUpdateEvent.cart_turnovertaxfree = atcCart.valueExclTax;
        cartUpdateEvent.cart_quantity = atcCart.quantity;
        cartUpdateEvent.cart_nbdistinctproduct = atcCart.ids.length;

        requestBody.events.push({
          name: 'cart.update',
          data: cartUpdateEvent
        });
      }

      let addToCartEvent = JSON.parse(JSON.stringify(event));
      if (eventData.items && eventData.items.length > 0) {
        addToCartEvent.cart_id = atcCart.id;
        addToCartEvent.product_cartcreation = isNewCart;
        addToCartEvent.product_quantity = eventData.items[0].quantity;
        addToCartEvent = addItemData(eventData.items[0], addToCartEvent);
      }

      requestBody.events.push({
        name: 'product.add_to_cart',
        data: addToCartEvent
      });

      setCookie('_pa_cart', JSON.stringify(atcCart), {
        domain: 'auto',
        path: '/',
        samesite: 'Lax',
        secure: true,
        'max-age': 7776000,
        HttpOnly: true
      });

      break;

    case 'remove_from_cart':
      let cookieRfcCart = getCookieValues('_pa_cart')[0];
      let rfcCart = {};

      if (!isEmptyCart(cookieRfcCart)) {
        rfcCart = JSON.parse(cookieRfcCart);

        const cartUpdateEvent = JSON.parse(JSON.stringify(event));
        cartUpdateEvent.cart_id = rfcCart.id;
        cartUpdateEvent.cart_currency = rfcCart.currency;
        cartUpdateEvent.cart_turnovertaxincluded = rfcCart.valueInclTax;
        cartUpdateEvent.cart_turnovertaxfree = rfcCart.valueExclTax;
        cartUpdateEvent.cart_quantity = rfcCart.quantity;
        cartUpdateEvent.cart_nbdistinctproduct = rfcCart.ids.length;

        requestBody.events.push({
          name: 'cart.update',
          data: cartUpdateEvent
        });

        rfcCart.currency = eventData.currency || ((eventData.items) ? eventData.items[0].currency : null);
        rfcCart.valueInclTax = rfcCart.valueInclTax - eventData.items[0].price * (eventData.items[0].quantity || 1);
        rfcCart.quantity = rfcCart.quantity - eventData.items[0].quantity;
        rfcCart.ids = removeCartItemIds(eventData.items, rfcCart.ids);
      }

      let removeFromCartEvent = JSON.parse(JSON.stringify(event));
      if (eventData.items && eventData.items.length > 0) {
        removeFromCartEvent.cart_id = rfcCart.id;
        removeFromCartEvent.product_quantity = eventData.items[0].quantity;
        removeFromCartEvent = addItemData(eventData.items[0], removeFromCartEvent);
      }

      requestBody.events.push({
        name: 'product.remove_from_cart',
        data: removeFromCartEvent
      });

      setCookie('_pa_cart', JSON.stringify(rfcCart), {
        domain: 'auto',
        path: '/',
        samesite: 'Lax',
        secure: true,
        'max-age': 7776000,
        HttpOnly: true
      });

      break;

    case 'view_cart':
      let cookieVcCart = getCookieValues('_pa_cart')[0];
      let vcCart = {};

      if (isEmptyCart(cookieVcCart)) {
        const cartCreationEvent = JSON.parse(JSON.stringify(event));
        vcCart = {
          id: generateUuid(),
          currency: eventData.currency || ((eventData.items) ? eventData.items[0].currency : null),
          creation_utc: Math.round(getTimestampMillis() / 1000),
          valueInclTax: (eventData.items) ? eventData.items.reduce((sum, item) => {
            return sum + item.price * (item.quantity || 1);
          }, 0) : 0,
          quantity: (eventData.items) ? eventData.items.reduce((sum, item) => {
            return sum + item.quantity;
          }, 0) : 0,
          ids: addCartItemIds(eventData.items, [])
        };

        cartCreationEvent.cart_id = vcCart.id;
        cartCreationEvent.cart_currency = vcCart.currency;
        cartCreationEvent.cart_turnovertaxincluded = vcCart.valueInclTax;
        cartCreationEvent.cart_turnovertaxfree = vcCart.valueExclTax;
        cartCreationEvent.cart_quantity = vcCart.quantity;
        cartCreationEvent.cart_nbdistinctproduct = vcCart.ids.length;

        requestBody.events.push({
          name: 'cart.creation',
          data: cartCreationEvent
        });

        if (eventData.items && eventData.items.length > 0) {
          for (let i = 0; i < eventData.items.length; i ++) {
            let addToCartEvent = JSON.parse(JSON.stringify(event));
            addToCartEvent.cart_id = vcCart.id;
            addToCartEvent.product_cartcreation = true;
            addToCartEvent.product_quantity = eventData.items[i].quantity;
            addToCartEvent = addItemData(eventData.items[i], addToCartEvent);

            requestBody.events.push({
              name: 'product.add_to_cart',
              data: addToCartEvent
            });
          }
        }

      } else {
        const cartUpdateEvent = JSON.parse(JSON.stringify(event));
        vcCart = JSON.parse(cookieVcCart);
        vcCart.currency = eventData.currency || ((eventData.items) ? eventData.items[0].currency : null);
        vcCart.valueInclTax = (eventData.items) ? eventData.items.reduce((sum, item) => {
          return sum + item.price * (item.quantity || 1);
        }, 0) : 0;
        vcCart.quantity = (eventData.items) ? eventData.items.reduce((sum, item) => {
          return sum + item.quantity;
        }, 0) : 0;
        vcCart.ids = addCartItemIds(eventData.items, []);

        cartUpdateEvent.cart_id = vcCart.id;
        cartUpdateEvent.cart_currency = vcCart.currency;
        cartUpdateEvent.cart_turnovertaxincluded = vcCart.valueInclTax;
        cartUpdateEvent.cart_turnovertaxfree = vcCart.valueExclTax;
        cartUpdateEvent.cart_quantity = vcCart.quantity;
        cartUpdateEvent.cart_nbdistinctproduct = vcCart.ids.length;

        requestBody.events.push({
          name: 'cart.update',
          data: cartUpdateEvent
        });
      }

      let viewCartEvent = JSON.parse(JSON.stringify(event));
      viewCartEvent.cart_id = vcCart.id;
      viewCartEvent.cart_currency = vcCart.currency;
      viewCartEvent.cart_turnovertaxincluded = vcCart.valueInclTax;
      viewCartEvent.cart_turnovertaxfree = vcCart.valueExclTax;
      viewCartEvent.cart_quantity = vcCart.quantity;
      viewCartEvent.cart_nbdistinctproduct = vcCart.ids.length;

      requestBody.events.push({
        name: 'cart.display',
        data: viewCartEvent
      });

      setCookie('_pa_cart', JSON.stringify(vcCart), {
        domain: 'auto',
        path: '/',
        samesite: 'Lax',
        secure: true,
        'max-age': 7776000,
        HttpOnly: true
      });

      break;

    case 'add_shipping_info':
      let cookieAsiCart = getCookieValues('_pa_cart')[0];
      let asiCart = {};

      if (isEmptyCart(cookieAsiCart)) {
        const cartCreationEvent = JSON.parse(JSON.stringify(event));
        asiCart = {
          id: generateUuid(),
          currency: eventData.currency || ((eventData.items) ? eventData.items[0].currency : null),
          creation_utc: Math.round(getTimestampMillis() / 1000),
          valueInclTax: (eventData.items) ? eventData.items.reduce((sum, item) => {
            return sum + item.price * (item.quantity || 1);
          }, 0) : 0,
          quantity: (eventData.items) ? eventData.items.reduce((sum, item) => {
            return sum + item.quantity;
          }, 0) : 0,
          ids: addCartItemIds(eventData.items, [])
        };

        cartCreationEvent.cart_id = asiCart.id;
        cartCreationEvent.cart_currency = asiCart.currency;
        cartCreationEvent.cart_turnovertaxincluded = asiCart.valueInclTax;
        cartCreationEvent.cart_turnovertaxfree = asiCart.valueExclTax;
        cartCreationEvent.cart_quantity = asiCart.quantity;
        cartCreationEvent.cart_nbdistinctproduct = asiCart.ids.length;

        requestBody.events.push({
          name: 'cart.creation',
          data: cartCreationEvent
        });

        if (eventData.items && eventData.items.length > 0) {
          for (let i = 0; i < eventData.items.length; i ++) {
            let addToCartEvent = JSON.parse(JSON.stringify(event));
            addToCartEvent.cart_id = asiCart.id;
            addToCartEvent.product_cartcreation = true;
            addToCartEvent.product_quantity = eventData.items[i].quantity;
            addToCartEvent = addItemData(eventData.items[i], addToCartEvent);

            requestBody.events.push({
              name: 'product.add_to_cart',
              data: addToCartEvent
            });
          }
        }

      } else {
        const cartUpdateEvent = JSON.parse(JSON.stringify(event));
        asiCart = JSON.parse(cookieAsiCart);
        asiCart.currency = eventData.currency || ((eventData.items) ? eventData.items[0].currency : null);
        asiCart.valueInclTax = (eventData.items) ? eventData.items.reduce((sum, item) => {
          return sum + item.price * (item.quantity || 1);
        }, 0) : 0;
        asiCart.quantity = (eventData.items) ? eventData.items.reduce((sum, item) => {
          return sum + item.quantity;
        }, 0) : 0;
        asiCart.ids = addCartItemIds(eventData.items, []);

        cartUpdateEvent.cart_id = asiCart.id;
        cartUpdateEvent.cart_currency = asiCart.currency;
        cartUpdateEvent.cart_turnovertaxincluded = asiCart.valueInclTax;
        cartUpdateEvent.cart_turnovertaxfree = asiCart.valueExclTax;
        cartUpdateEvent.cart_quantity = asiCart.quantity;
        cartUpdateEvent.cart_nbdistinctproduct = asiCart.ids.length;

        requestBody.events.push({
          name: 'cart.update',
          data: cartUpdateEvent
        });
      }

      let addShippingInfoEvent = JSON.parse(JSON.stringify(event));
      addShippingInfoEvent.cart_id = asiCart.id;
      addShippingInfoEvent.cart_currency = asiCart.currency;
      addShippingInfoEvent.cart_turnovertaxincluded = asiCart.valueInclTax;
      addShippingInfoEvent.cart_turnovertaxfree = asiCart.valueExclTax;
      addShippingInfoEvent.cart_quantity = asiCart.quantity;
      addShippingInfoEvent.cart_nbdistinctproduct = asiCart.ids.length;
      addShippingInfoEvent.shipping_delivery = eventData.shipping_tier;

      requestBody.events.push({
        name: 'cart.delivery',
        data: addShippingInfoEvent
      });

      setCookie('_pa_cart', JSON.stringify(asiCart), {
        domain: 'auto',
        path: '/',
        samesite: 'Lax',
        secure: true,
        'max-age': 7776000,
        HttpOnly: true
      });

      break;

    case 'add_payment_info':
      let cookieApiCart = getCookieValues('_pa_cart')[0];
      let apiCart = {};

      if (isEmptyCart(cookieApiCart)) {
        const cartCreationEvent = JSON.parse(JSON.stringify(event));
        apiCart = {
          id: generateUuid(),
          currency: eventData.currency || ((eventData.items) ? eventData.items[0].currency : null),
          creation_utc: Math.round(getTimestampMillis() / 1000),
          valueInclTax: (eventData.items) ? eventData.items.reduce((sum, item) => {
            return sum + item.price * (item.quantity || 1);
          }, 0) : 0,
          quantity: (eventData.items) ? eventData.items.reduce((sum, item) => {
            return sum + item.quantity;
          }, 0) : 0,
          ids: addCartItemIds(eventData.items, [])
        };

        cartCreationEvent.cart_id = apiCart.id;
        cartCreationEvent.cart_currency = apiCart.currency;
        cartCreationEvent.cart_turnovertaxincluded = apiCart.valueInclTax;
        cartCreationEvent.cart_turnovertaxfree = apiCart.valueExclTax;
        cartCreationEvent.cart_quantity = apiCart.quantity;
        cartCreationEvent.cart_nbdistinctproduct = apiCart.ids.length;

        requestBody.events.push({
          name: 'cart.creation',
          data: cartCreationEvent
        });

        if (eventData.items && eventData.items.length > 0) {
          for (let i = 0; i < eventData.items.length; i ++) {
            let addToCartEvent = JSON.parse(JSON.stringify(event));
            addToCartEvent.cart_id = apiCart.id;
            addToCartEvent.product_cartcreation = true;
            addToCartEvent.product_quantity = eventData.items[i].quantity;
            addToCartEvent = addItemData(eventData.items[i], addToCartEvent);

            requestBody.events.push({
              name: 'product.add_to_cart',
              data: addToCartEvent
            });
          }
        }

      } else {
        const cartUpdateEvent = JSON.parse(JSON.stringify(event));
        apiCart = JSON.parse(cookieApiCart);
        apiCart.currency = eventData.currency || ((eventData.items) ? eventData.items[0].currency : null);
        apiCart.valueInclTax = (eventData.items) ? eventData.items.reduce((sum, item) => {
          return sum + item.price * (item.quantity || 1);
        }, 0) : 0;
        apiCart.quantity = (eventData.items) ? eventData.items.reduce((sum, item) => {
          return sum + item.quantity;
        }, 0) : 0;
        apiCart.ids = addCartItemIds(eventData.items, []);

        cartUpdateEvent.cart_id = apiCart.id;
        cartUpdateEvent.cart_currency = apiCart.currency;
        cartUpdateEvent.cart_turnovertaxincluded = apiCart.valueInclTax;
        cartUpdateEvent.cart_turnovertaxfree = apiCart.valueExclTax;
        cartUpdateEvent.cart_quantity = apiCart.quantity;
        cartUpdateEvent.cart_nbdistinctproduct = apiCart.ids.length;

        requestBody.events.push({
          name: 'cart.update',
          data: cartUpdateEvent
        });
      }

      let addPaymentInfoEvent = JSON.parse(JSON.stringify(event));
      addPaymentInfoEvent.cart_id = apiCart.id;
      addPaymentInfoEvent.cart_currency = apiCart.currency;
      addPaymentInfoEvent.cart_turnovertaxincluded = apiCart.valueInclTax;
      addPaymentInfoEvent.cart_turnovertaxfree = apiCart.valueExclTax;
      addPaymentInfoEvent.cart_quantity = apiCart.quantity;
      addPaymentInfoEvent.cart_nbdistinctproduct = apiCart.ids.length;
      addPaymentInfoEvent.payment_mode = eventData.payment_type;

      requestBody.events.push({
        name: 'cart.payment',
        data: addPaymentInfoEvent
      });

      setCookie('_pa_cart', JSON.stringify(apiCart), {
        domain: 'auto',
        path: '/',
        samesite: 'Lax',
        secure: true,
        'max-age': 7776000,
        HttpOnly: true
      });

      break;

    case 'purchase':
      let cookiePCart = getCookieValues('_pa_cart')[0];
      let pCart = {};
      if (!isEmptyCart(cookiePCart)) {
        pCart = JSON.parse(cookiePCart);
      }

      const transactionConfirmationEvent = JSON.parse(JSON.stringify(event));
      transactionConfirmationEvent.goal_type = 'purchase';
      transactionConfirmationEvent.cart_id = pCart.id || eventData.transaction_id;
      transactionConfirmationEvent.cart_currency = eventData.currency || (eventData.items) ? eventData.items[0].currency : null;
      transactionConfirmationEvent.cart_creation_utc = pCart.creation_utc || Math.round(getTimestampMillis() / 1000);
      transactionConfirmationEvent.cart_turnovertaxincluded = eventData.value;
      transactionConfirmationEvent.cart_quantity = eventData.items.reduce((sum, item) => {
        return sum + item.quantity;
      }, 0);
      transactionConfirmationEvent.cart_nbdistinctproduct = eventData.items.length;
      transactionConfirmationEvent.shipping_delivery = eventData.shipping_tier;
      transactionConfirmationEvent.shipping_costtaxincluded = eventData.shipping;
      transactionConfirmationEvent.transaction_id = eventData.transaction_id;
      transactionConfirmationEvent.transaction_promocode = (eventData.coupon) ? [eventData.coupon] : null;
      transactionConfirmationEvent.transaction_status = "Approved";
      transactionConfirmationEvent.transaction_firstpurchase = eventData.new_customer;

      requestBody.events.push({
        name: 'transaction.confirmation',
        data: transactionConfirmationEvent
      });

      let productPurchasedEvent = event;
      if (eventData.items && eventData.items.length > 0) {
        for (let i = 0; i < eventData.items.length; i ++) {
          let productPurchasedEvent = JSON.parse(JSON.stringify(event));
          productPurchasedEvent = addItemData(eventData.items[i], productPurchasedEvent);
          productPurchasedEvent.cart_id = pCart.id || eventData.transaction_id;
          productPurchasedEvent.product_quantity = eventData.items[i].quantity;
          productPurchasedEvent.payment_mode = eventData.payment_type;
          productPurchasedEvent.transaction_id = eventData.transaction_id;
          productPurchasedEvent.transaction_promocode = [eventData.items[i].coupon];

          requestBody.events.push({
            name: 'product.purchased',
            data: productPurchasedEvent
          });
        }
      }

      setCookie('_pa_cart', '', {
        domain: 'auto',
        path: '/',
        samesite: 'Lax',
        secure: true,
        'max-age': -1,
        HttpOnly: true
      });

      break;

    case 'search':
      let searchEvent = JSON.parse(JSON.stringify(event));
      searchEvent.ise_keyword = eventData.search_term;
      searchEvent.ise_page = makeInteger(eventData.ise_page);

      requestBody.events.push({
        name: 'internal_search_result.display',
        data: searchEvent
      });

      break;

    default:
      requestBody.events.push({
        name: eventData.event_name.toLowerCase(),
        data: event
      });

      break;
  }
} else if (data.eventName === 'standard') {
  requestBody.events.push({
    name: data.eventNameStandard,
    data: event
  });
} else {
  requestBody.events.push({
    name: data.eventNameCustom.toLowerCase(),
    data: event
  });
}

// GOAL TYPE
if (data.goalTypeList) {
  for (let event of requestBody.events) {
    for (let d of data.goalTypeList) {
      if (event.name === d.event.toLowerCase()) {
        event.data.goal_type = d.goal_type;
      }
    }
  }
}

// STANDARD
if (data.standardList) {
  for (let event of requestBody.events) {
    for (let d of data.standardList) {
      event.data[d.name] = d.value;
    }
  }
}

// PAGE DISPLAY
if (data.pageDisplayList) {
  for (let event of requestBody.events) {
    if (event.name === 'page.display') {
      for (let d of data.pageDisplayList) {
        event.data[d.name] = d.value;
      }
    }
  }
}

// CLICKS
if (data.clicksList) {
  for (let event of requestBody.events) {
    if (event.name.indexOf('click.') > -1) {
      for (let d of data.clicksList) {
        event.data[d.name] = d.value;
      }
    }
  }
}

// ONSITE ADS
if (data.onsiteAdsList) {
  for (let event of requestBody.events) {
    if (event.name.indexOf('publisher.') > -1 || event.name.indexOf('self_promotion.') > -1) {
      for (let d of data.onsiteAdsList) {
        event.data[d.name] = d.value;
      }
    }
  }
}

// ONSITE ADS
if (data.internalSearchEngineList) {
  for (let event of requestBody.events) {
    if (event.name.indexOf('internal_search_result.') > -1) {
      for (let d of data.internalSearchEngineList) {
        event.data[d.name] = d.value;
      }
    }
  }
}

// MV TESTING
if (data.mvTestingList) {
  for (let event of requestBody.events) {
    if (event.name.indexOf('mv_test.') > -1) {
      for (let d of data.mvTestingList) {
        event.data[d.name] = d.value;
      }
    }
  }
}

// CART
if (data.cartList) {
  for (let event of requestBody.events) {
    if (event.name.indexOf('cart.') > -1 || event.name === 'transaction.confirmation' || event.name === 'product.purchased') {
      for (let d of data.cartList) {
        event.data[d.name] = d.value;
      }
    }
  }
}

// SHIPPING
if (data.shippingList) {
  for (let event of requestBody.events) {
    if (event.name === 'transaction.confirmation' || event.name === 'cart.delivery' || event.name === 'cart.payment') {
      for (let d of data.shippingList) {
        event.data[d.name] = d.value;
      }
    }
  }
}

// PAYMENT
if (data.paymentList) {
  for (let event of requestBody.events) {
    if (event.name === 'product.purchased' || event.name === 'transaction.confirmation' || event.name === 'cart.payment') {
      for (let d of data.paymentList) {
        event.data[d.name] = d.value;
      }
    }
  }
}

// TRANSACTION
if (data.transactionList) {
  for (let event of requestBody.events) {
    if (event.name === 'product.purchased' || event.name === 'transaction.confirmation') {
      for (let d of data.transactionList) {
        event.data[d.name] = d.value;
      }
    }
  }
}

// CUSTOM DATA
if (data.customDataList) {
  for (let event of requestBody.events) {
    for (let d of data.customDataList) {
      event.data[d.name.toLowerCase()] = d.value;
    }
  }
}

// CONSENT
if (consent === 'exempt' || consent === 'essential') {
  for (let event of requestBody.events) {
    for (let param in event.data) {
      if (exemptConfig.params.indexOf(param) === -1) {
        event.data[param] = null;
      }
    }
  }
}

if (consent === 'optout' || consent === 'opt-out') {
  for (let event of requestBody.events) {
    for (let param in event.data) {
      if (optOutConfig.params.indexOf(param) === -1) {
        event.data[param] = null;
      }
    }
  }
}

// CLEAN DATA - REMOVE EMPTY VALUES
for (let event of requestBody.events) {
  let bodyData = {};
  for (let bodyDataKey in event.data) {
    if (event.data[bodyDataKey]) {
      bodyData[bodyDataKey] = event.data[bodyDataKey];
    }
  }
  event.data = bodyData;
}


if (isLoggingEnabled) {
  logToConsole(JSON.stringify({
    'Name': 'Piano',
    'Type': 'Request',
    'EventName': event.event_name,
    'RequestMethod': 'POST',
    'RequestUrl': apiEndpoint,
    'RequestBody': requestBody,
  }));
}

sendHttpRequest(apiEndpoint, (statusCode, headers, body) => {
  if (statusCode >= 200 && statusCode < 300) {
    data.gtmOnSuccess();
  } else {
    data.gtmOnFailure();
  }
}, {
  headers: requestHeaders,
  method: 'POST'
}, JSON.stringify(requestBody));



function addItemData(item, event) {
  if (!item) {
    return event;
  }

  event.product_id = item.item_id;
  event.product = item.item_name;
  event.product_variant = item.item_variant;
  event.product_brand = item.item_brand;
  event.product_discount = item.discount;
  event.product_placement = (item.item_list_id) ? item.item_list_id.toString() : null;
  event.product_pricetaxincluded = item.price;
  event.product_category1 = item.item_category;
  event.product_category2 = item.item_category2;
  event.product_category3 = item.item_category3;
  event.product_category4 = item.item_category4;

  if (data.productList) {
    data.productList.forEach(d => {
      event[d.name] = d.value;
    });
  }

  return event;
}

function determinateIsLoggingEnabled() {
  const containerVersion = getContainerVersion();
  return !!(
    containerVersion &&
    (containerVersion.debugMode || containerVersion.previewMode)
  );
}

function addCartItemIds(currentItems, previousIds) {
  if (!currentItems) {
    return previousIds;
  }

  let currentIds = currentItems.map(item => ({ id: item.item_id, qty: item.quantity || 1 }));
  let allIds = previousIds.concat(currentIds);

  let uniqueIds = [];
  allIds.forEach(item => {
    let alreadyExist = false;
    for (let i = 0; i < uniqueIds.length; i++) {
      if (uniqueIds[i].id === item.id) {
        uniqueIds[i].qty += item.qty;
        alreadyExist = true;
        break;
      }
    }
    if (!alreadyExist) {
      uniqueIds.push({ id: item.id, qty: item.qty });
    }
  });
  return uniqueIds;
}

function removeCartItemIds(currentItems, previousIds) {
  if (!currentItems) {
    return previousIds;
  }

  let currentIds = currentItems.map(item => ({ id: item.item_id, qty: item.quantity || 1 }));

  currentIds.forEach(currentItem => {
    for (let i = 0; i < previousIds.length; i++) {
      let previousItem = previousIds[i];
      if (previousItem.id === currentItem.id) {
        previousItem.qty = previousItem.qty - currentItem.qty;
        if (previousItem.qty <= 0) {
          previousIds.splice(i, 1);
          i--;
        }
        break;
      }
    }
  });

  return previousIds;
}

function generateUuid() {
  var result, i, j;
  result = '';
  for (j = 0; j < 32; j++) {
    if (j == 8 || j == 12 || j == 16 || j == 20) result = result + '-';
    i = Math.floor(generateRandom(0, 15)).toString(16).toLowerCase();
    result = result + i;
  }
  return result;
}

function isEmptyCart(value) {
  if(!value) {
    return true;
  }

  const parsed = JSON.parse(value);
  const type = getType(parsed);
  if(type === "array") {
    return parsed.length === 0;
  }

  if(type === "object") {
    return Object.keys(parsed).length === 0;
  }

  return false;
}

function isUuid(value) {
  if (!value) return false;

  const UuidRegex = createRegex('^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$', 'i');

  if (UuidRegex === null) return false;

  return testRegex(UuidRegex, value);
}

function parseInt36(input) {
  if (!input) {
    return 0;
  }

  const base = 36;
  const chars = "0123456789abcdefghijklmnopqrstuvwxyz";
  let result = 0;

  for (let i = 0; i < input.length; i++) {
    const digit = chars.indexOf(input[i].toLowerCase());
    if (digit === -1) return 0;
    result = result * base + digit;
  }

  return result;
}


___SERVER_PERMISSIONS___

  [
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "_pcid"
              },
              {
                "type": 1,
                "string": "_pa_cart"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
    {
      "instance": {
        "key": {
          "publicId": "logging",
          "versionId": "1"
        },
        "param": [
          {
            "key": "environments",
            "value": {
              "type": 1,
              "string": "debug"
            }
          }
        ]
      },
      "clientAnnotations": {
        "isEditedByUser": true
      },
      "isRequired": true
    },
    {
      "instance": {
        "key": {
          "publicId": "read_container_data",
          "versionId": "1"
        },
        "param": []
      },
      "isRequired": true
    },
    {
      "instance": {
        "key": {
          "publicId": "set_cookies",
          "versionId": "1"
        },
        "param": [
          {
            "key": "allowedCookies",
            "value": {
              "type": 2,
              "listItem": [
                {
                  "type": 3,
                  "mapKey": [
                    {
                      "type": 1,
                      "string": "name"
                    },
                    {
                      "type": 1,
                      "string": "domain"
                    },
                    {
                      "type": 1,
                      "string": "path"
                    },
                    {
                      "type": 1,
                      "string": "secure"
                    },
                    {
                      "type": 1,
                      "string": "session"
                    }
                  ],
                  "mapValue": [
                    {
                      "type": 1,
                      "string": "_pcid"
                    },
                    {
                      "type": 1,
                      "string": "*"
                    },
                    {
                      "type": 1,
                      "string": "*"
                    },
                    {
                      "type": 1,
                      "string": "any"
                    },
                    {
                      "type": 1,
                      "string": "any"
                    }
                  ]
                },
                {
                  "type": 3,
                  "mapKey": [
                    {
                      "type": 1,
                      "string": "name"
                    },
                    {
                      "type": 1,
                      "string": "domain"
                    },
                    {
                      "type": 1,
                      "string": "path"
                    },
                    {
                      "type": 1,
                      "string": "secure"
                    },
                    {
                      "type": 1,
                      "string": "session"
                    }
                  ],
                  "mapValue": [
                    {
                      "type": 1,
                      "string": "_pa_cart"
                    },
                    {
                      "type": 1,
                      "string": "*"
                    },
                    {
                      "type": 1,
                      "string": "*"
                    },
                    {
                      "type": 1,
                      "string": "any"
                    },
                    {
                      "type": 1,
                      "string": "any"
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "clientAnnotations": {
        "isEditedByUser": true
      },
      "isRequired": true
    },
    {
      "instance": {
        "key": {
          "publicId": "read_event_data",
          "versionId": "1"
        },
        "param": [
          {
            "key": "eventDataAccess",
            "value": {
              "type": 1,
              "string": "any"
            }
          }
        ]
      },
      "clientAnnotations": {
        "isEditedByUser": true
      },
      "isRequired": true
    },
    {
      "instance": {
        "key": {
          "publicId": "send_http",
          "versionId": "1"
        },
        "param": [
          {
            "key": "allowedUrls",
            "value": {
              "type": 1,
              "string": "specific"
            }
          },
          {
            "key": "urls",
            "value": {
              "type": 2,
              "listItem": [
                {
                  "type": 1,
                  "string": "https://*.pa-cd.com/"
                }
              ]
            }
          }
        ]
      },
      "clientAnnotations": {
        "isEditedByUser": true
      },
      "isRequired": true
    }
  ]


___TESTS___

scenarios: []


___NOTES___

Created on 19/11/2024, 11:57:19


